{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow-lg border-0 rounded-4" style="max-width: 400px; width: 100%;">
        <div class="card-body p-4 p-sm-5">
            <div class="text-center mb-4">
                <div class="rounded-circle bg-primary bg-opacity-10 d-inline-flex p-3 mb-3">
                    <i class="bi bi-shield-lock fs-1 text-primary"></i>
                </div>
                <h3 class="fw-bold mb-1">Nova Senha</h3>
                <p class="text-secondary small">Escolha uma nova senha segura para sua conta.</p>
            </div>

            <form method="post">
                {% csrf_token %}
                {% for field in form %}
                <div class="mb-3">
                    <label for="{{ field.id_for_label }}" class="form-label fw-bold small text-secondary">{{ field.label
                        }}</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light border-end-0"><i
                                class="bi bi-asterisk text-secondary"></i></span>
                        {{ field }}
                        <!-- We let django render the input but could add class via widget tweaks in form or js, 
                             for now simplistic rendering or we can manually render inputs if we knew names. 
                             Django auth forms usually have 'new_password1' etc. better to trust 'form.as_p' or iterate with custom styling if possible.
                             Let's try to add class="form-control" via JS or just wrap it. 
                        -->
                    </div>
                    {% if field.help_text %}
                    <div class="form-text small">{{ field.help_text }}</div>
                    {% endif %}
                    {% for error in field.errors %}
                    <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>
                {% endfor %}

                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-primary rounded-pill fw-bold py-2 shadow-sm transition-scale">
                        Confirmar Senha
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Simple script to add bootstrap classes to django rendered inputs if not present
    document.querySelectorAll('input[type="password"]').forEach(input => {
        input.classList.add('form-control', 'bg-light', 'border-start-0', 'ps-0');
    });
</script>
{% endblock %}